<p>
  single-restaurant works!
</p>

<button id="add-section-btn" (click)="showAddSection()">Add menu section</button>


<div class="grid">
  <div class="header">
    <div>Name</div>
    <div>Description</div>
    <div>Price</div>
    <div>Actions</div>
  </div>
</div>
<div class="grid" *ngFor="let sect of menuSections">
  <div class="section">
    <div class="sect-name">  {{sect.name}}  </div>
    <div class="actions">
      <button class="change-btn" (click)="showChangeSection(sect)">Change</button>
      <button class="delete-btn" (click)="deleteMenuSection(sect.id)">Delete</button>
      <button class="add-btn" (click)="showAddDish(sect)">Add dish</button>
    </div>

  </div>
  <div class="subgrid" *ngFor="let dish of sect.dishes">
    <div>{{dish.name}}</div>
    <div class="description">{{dish.description}}</div>
    <div>{{dish.price}}</div>
    <div class="actions">
      <button class="change-btn" (click)="showChangeDish(dish,sect.name)">Change</button>
      <button class="delete-btn" (click)="deleteDish(dish.id)">Delete</button>
    </div>
  </div>
</div>


<div id="modal" class="modal">
  <div class="modal-content">
    <span class="closeModal" (click)="closeModal()">&times;</span>

    <!---------------------------------------------------------------add section form-->
    <form *ngIf="showAddSect" #addSectionForm='ngForm' class="form">
      <h2>Add menu section</h2>
      <p>{{description}}</p>
      <hr>
      <label><b>Name:</b></label>
      <input
        [(ngModel)]="newMenuSection.name"
        [ngStyle]="{border: newSectNameInp.invalid && newSectNameInp.dirty ? '2px solid red' : '2px solid green'}"
        #newSectNameInp='ngModel'
        required maxlength="50"
        placeholder="the name of new section"
        size="50"
        type="text"
        name="newSectName"
        autocomplete="off"
      >
      <button
        class="add-btn"
        [disabled]="addSectionForm.invalid"
        (click)="addMenuSection()"
      >Add
      </button>
      <button class="cancel-btn" (click)="closeModal()">Cancel</button>
    </form>
    <!---------------------------------------------------------------change section form-->
    <form *ngIf="showChangeSect" #changeSectionForm='ngForm' class="form">
      <h2>Change menu section</h2>
      <p>{{description}}</p>
      <hr>
      <label><b>Existing name:</b></label>
      <div>{{sectionName}}</div>
      <label><b>New name:</b></label>
      <input
        [(ngModel)]="sectionForChange.name"
        [ngStyle]="{border: changeSectNameInp.invalid && changeSectNameInp.dirty ? '2px solid red' : '2px solid green'}"
        #changeSectNameInp='ngModel'
        required maxlength="50"
        placeholder="new name of the section"
        size="50"
        type="text"
        name="changeSectName"
        autocomplete="off"
      >
      <button
        class="change-btn"
        [disabled]="changeSectionForm.invalid"
        (click)="changeMenuSection()"
      >Change
      </button>
      <button class="cancel-btn" (click)="closeModal()">Cancel</button>
    </form>
    <!----------------------------------------------------------------------add dish form-->
    <form *ngIf="showAddDsh" #addDishForm='ngForm' class="form">
      <h2>Add dish</h2>
      <p>{{description}}</p>
      <hr>
      <label><b>Menu section:</b></label>
      <div>{{sectionName}}</div>

      <label><b>Name:</b></label>
      <input
        [(ngModel)]="newDish.name"
        [ngStyle]="{border: newDishNameInp.invalid && newDishNameInp.dirty ? '2px solid red' : '2px solid green'}"
        #newDishNameInp='ngModel'
        required maxlength="50"
        size="50"
        placeholder="the name of new dish"
        type="text"
        name="newDishName"
        autocomplete="off">
      <label><b>Description:</b></label>
      <textarea
        [(ngModel)]="newDish.description"
        [ngStyle]="{border: newDishDescInp.invalid && newDishDescInp.dirty? '2px solid red' : '2px solid green'}"
        #newDishDescInp='ngModel'
        required maxlength="280"
        cols="50"
        rows="6"
        placeholder="the description of new dish"
        type="text"
        name="newDishDesc"
      ></textarea>
      <label><b>Price:</b></label>
      <input
        [(ngModel)]="newDish.price"
        [ngStyle]="{border: newDishPriceInp.invalid && newDishPriceInp.dirty ? '2px solid red' : '2px solid green'}"
        #newDishPriceInp='ngModel'
        required pattern="{{dataService.priceRegExp.source}}"
        size="10"
        placeholder="the price of new dish"
        type="text"
        name="newDishPrice"
        autocomplete="off">
      <button
        class="add-btn"
        [disabled]="addDishForm.invalid"
        (click)="addDish()"
      >Add
      </button>
      <button class="cancel-btn" (click)="closeModal()">Cancel</button>
    </form>

    <!----------------------------------------------------------------------change dish form-->
    <form *ngIf="showChangeDsh" #changeDishForm='ngForm' class="form">
      <h2>Change dish</h2>
      <p>{{description}}</p>
      <hr>
      <label><b>Menu section:</b></label>
      <div>{{sectionName}}</div>

      <label><b>Name:</b></label>
      <input
        [(ngModel)]="dishForChange.name"
        [ngStyle]="{border: changeDishNameInp.invalid && changeDishNameInp.dirty ? '2px solid red' : '2px solid green'}"
        #changeDishNameInp='ngModel'
        required maxlength="50"
        size="50"
        placeholder="new name of the dish"
        type="text"
        name="changeDishName"
        autocomplete="off">
      <label><b>Description:</b></label>
      <textarea
        [(ngModel)]="dishForChange.description"
        [ngStyle]="{border: changeDishDescInp.invalid && changeDishDescInp.dirty? '2px solid red' : '2px solid green'}"
        #changeDishDescInp='ngModel'
        required maxlength="280"
        cols="50"
        rows="6"
        placeholder="new description of the dish"
        type="text"
        name="changeDishDesc"
      ></textarea>
      <label><b>Price:</b></label>
      <input
        [(ngModel)]="dishForChange.price"
        [ngStyle]="{border: changeDishPriceInp.invalid && changeDishPriceInp.dirty ? '2px solid red' : '2px solid green'}"
        #changeDishPriceInp='ngModel'
        required pattern="{{dataService.priceRegExp.source}}"
        size="10"
        placeholder="new price of the dish"
        type="text"
        name="changeDishPrice"
        autocomplete="off">
      <button
        class="change-btn"
        [disabled]="changeDishForm.invalid"
        (click)="changeDish()"
      >Change
      </button>
      <button class="cancel-btn" (click)="closeModal()">Cancel</button>
    </form>


  </div>
</div>


<!--<button (click)="openDialog()">Open dialog</button>-->
<!--<div *ngIf="showAddSection">-->

<!--<form #addSectionForm='ngForm'>-->
<!--<label>Name:<br>-->
<!--<input-->
<!--[(ngModel)]="newMenuSection.name"-->
<!--[ngStyle]="{border: sectNameInp.invalid && sectNameInp.dirty ? '2px solid red' : '2px solid green'}"-->
<!--#sectNameInp='ngModel'-->
<!--required maxlength="50"-->
<!--placeholder="menu section's name"-->
<!--size="50"-->
<!--type="text"-->
<!--name="sectName"-->
<!--&gt;</label>-->

<!--<button-->
<!--[disabled]="addSectionForm.invalid"-->
<!--(click)="addMenuSection()"-->
<!--&gt;Add-->
<!--</button>-->
<!--<button (click)="showAddSection=false">Cancel</button>-->
<!--</form>-->

<!--</div>-->

<!--&lt;!&ndash;<ng-template #otherD>&ndash;&gt;-->

<!--<button (click)="showAddSection = true">Add menu section</button>-->
<!--<br><br>-->

<!--<div class="containerLeft">-->
<!--<h1>Menu of restaurant</h1>-->
<!--<table class="table">-->
<!--<thead>-->
<!--<tr style="background: chocolate">-->
<!--<th scope="col" width="30%">Name</th>-->
<!--<th scope="col">Description</th>-->
<!--<th scope="col" width="10%">Price</th>-->
<!--<th scope="col" width="20%">Actions</th>-->
<!--</tr>-->
<!--</thead>-->

<!--</table>-->
<!--<table *ngFor="let sect of menuSections">-->
<!--<thead>-->
<!--&lt;!&ndash;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45; menu section -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&ndash;&gt;-->
<!--<tr *ngIf="!showChangeSect[sect.id]; else changeSect"-->
<!--style="background: rosybrown">-->
<!--<th colspan="3">Menu section : {{sect.name}}</th>-->
<!--<th width="20%">-->
<!--<button (click)="showChangeSect[sect.id] = true">Change</button>-->
<!--<button (click)="deleteMenuSection(sect.id)">Delete</button>-->
<!--<button (click)="showAddDish[sect.id] = true">Add dish</button>-->
<!--</th>-->
<!--</tr>-->
<!--&lt;!&ndash;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45; change section &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&ndash;&gt;-->
<!--<ng-template #changeSect>-->
<!--<tr *ngIf="showChangeSect[sect.id]"-->
<!--style="background: rosybrown">-->
<!--<th colspan="3">-->
<!--<input-->
<!--[(ngModel)]="newSectName"-->
<!--[ngStyle]="{border: sectNewNameInp.invalid && sectNewNameInp.dirty ? '2px solid red' : '2px solid green'}"-->
<!--#sectNewNameInp='ngModel'-->
<!--required maxlength="50"-->
<!--placeholder="{{sect.name}}"-->
<!--size="50"-->
<!--type="text"-->
<!--name="sectNewName">-->
<!--</th>-->
<!--<th width="20%">-->
<!--<button (click)="showChangeSect[sect.id] = false">Cancel</button>-->
<!--<button [disabled]="sectNewNameInp.invalid"-->
<!--(click)="changeMenuSection(sect)"-->
<!--&gt;Change-->
<!--</button>-->
<!--</th>-->
<!--</tr>-->
<!--</ng-template>-->
<!--&lt;!&ndash;-&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45; new dish &#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&ndash;&gt;-->
<!--<tr *ngIf="showAddDish[sect.id]"-->
<!--style="background: rosybrown">-->
<!--<th width="30%">-->
<!--<input-->
<!--[(ngModel)]="newDish.name"-->
<!--[ngStyle]="{border: dNameInp.invalid && dNameInp.dirty ? '2px solid red' : '2px solid green'}"-->
<!--#dNameInp='ngModel'-->
<!--required maxlength="50"-->
<!--size="50"-->
<!--placeholder="new dish's name"-->
<!--type="text"-->
<!--name="sectName">-->
<!--</th>-->
<!--<th>-->
<!--<textarea-->
<!--[(ngModel)]="newDish.description"-->
<!--[ngStyle]="{border: dDescInp.invalid && dDescInp.dirty? '2px solid red' : '2px solid green'}"-->
<!--#dDescInp='ngModel'-->
<!--required maxlength="280"-->
<!--cols="71"-->
<!--rows="4"-->
<!--placeholder="new dish's description"-->
<!--type="text"-->
<!--name="dDesc"-->
<!--&gt;</textarea>-->
<!--</th>-->
<!--<th width="10%">-->
<!--<input [(ngModel)]="newDish.price"-->
<!--[ngStyle]="{border: dPriceInp.invalid && dPriceInp.dirty ? '2px solid red' : '2px solid green'}"-->
<!--#dPriceInp='ngModel'-->
<!--required pattern="{{dataService.priceRegExp.source}}"-->
<!--size="10"-->
<!--placeholder="new dish's price"-->
<!--type="text"-->
<!--name="sectName">-->
<!--</th>-->
<!--<th width="20%">-->
<!--<button (click)="showAddDish[sect.id] = false">Cancel</button>-->
<!--<button-->
<!--[disabled]="dNameInp.invalid || dDescInp.invalid || dPriceInp.invalid"-->
<!--(click)="addDish(sect.id)">Add dish-->
<!--</button>-->
<!--</th>-->
<!--</tr>-->
<!--</thead>-->
<!--&lt;!&ndash;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45; dishes -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&ndash;&gt;-->
<!--<tbody *ngFor="let dish of sect.dishes">-->

<!--<tr *ngIf="!showChangeDish[dish.id]">-->
<!--<td width="30%">{{dish.name}}</td>-->
<!--<td>{{dish.description}}</td>-->
<!--<td width="10%">{{dish.price}}</td>-->
<!--<td width="20">-->
<!--<button (click)="showChangeDish[dish.id] = true">Change</button>-->
<!--<button (click)="deleteDish(dish.id)">Delete</button>-->
<!--</td>-->
<!--</tr>-->


<!--&lt;!&ndash;-&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45; change dish -&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&ndash;&gt;-->
<!--<tr *ngIf="showChangeDish[dish.id]">-->
<!--<th width="30%">-->
<!--<input-->
<!--[(ngModel)]="newDish.name"-->
<!--[ngStyle]="{border: dNewNameInp.invalid && dNewNameInp.dirty ? '2px solid red' : '2px solid green'}"-->
<!--#dNewNameInp='ngModel'-->
<!--required maxlength="50"-->
<!--size="50"-->
<!--placeholder="{{dish.name}}"-->
<!--type="text"-->
<!--name="sectName">-->
<!--</th>-->
<!--<th>-->
<!--<textarea-->
<!--[(ngModel)]="newDish.description"-->
<!--[ngStyle]="{border: dNewDescInp.invalid && dNewDescInp.dirty? '2px solid red' : '2px solid green'}"-->
<!--#dNewDescInp='ngModel'-->
<!--required maxlength="280"-->
<!--cols="71"-->
<!--rows="4"-->
<!--placeholder="{{dish.description}}"-->
<!--type="text"-->
<!--name="dDesc"-->
<!--&gt;</textarea>-->
<!--</th>-->
<!--<th width="10%">-->
<!--<input [(ngModel)]="newDish.price"-->
<!--[ngStyle]="{border: dNewPriceInp.invalid && dNewPriceInp.dirty ? '2px solid red' : '2px solid green'}"-->
<!--#dNewPriceInp='ngModel'-->
<!--required pattern="{{dataService.priceRegExp.source}}"-->
<!--size="10"-->
<!--placeholder="{{dish.price}}"-->
<!--type="text"-->
<!--name="sectName">-->
<!--</th>-->
<!--<th *ngIf="showChangeDish[dish.id]" width="20%">-->
<!--<button (click)="showChangeDish[dish.id] = false">Cancel</button>-->
<!--<button-->
<!--[disabled]="dNewNameInp.invalid || dNewDescInp.invalid || dNewPriceInp.invalid"-->
<!--(click)="changeDish(dish)"-->
<!--&gt;Change-->
<!--</button>-->
<!--</th>-->
<!--</tr>-->


<!--</tbody>-->
<!--</table>-->
<!--</div>-->


<!--</ng-template>-->
